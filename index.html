<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Hand – Continuous Finger Motion</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  svg {
    width: 320px;
    height: 320px;
  }

  .palm {
    stroke: yellow;
    stroke-width: 6;
    fill: none;
  }

  .finger {
    stroke: yellow;
    stroke-width: 5;
    stroke-linecap: round;
  }
</style>
</head>

<body>

<svg viewBox="0 0 300 300">

  <!-- 手掌（固定） -->
  <line x1="150" y1="220" x2="150" y2="170" class="palm"/>

  <!-- 指（5本） -->
  <line id="f1" x1="110" y1="170" x2="110" y2="110" class="finger"/>
  <line id="f2" x1="130" y1="170" x2="130" y2="105" class="finger"/>
  <line id="f3" x1="150" y1="170" x2="150" y2="100" class="finger"/>
  <line id="f4" x1="170" y1="170" x2="170" y2="105" class="finger"/>
  <line id="f5" x1="190" y1="170" x2="190" y2="115" class="finger"/>

</svg>

<script>
/*
  角度だけを連続的に変える
  → 人は「指が曲がった」と認知する
*/

const fingers = [
  { id: "f1", baseX: 110, baseY: 170, len: 60, angleOpen: -90, angleGrip: -140 },
  { id: "f2", baseX: 130, baseY: 170, len: 65, angleOpen: -90, angleGrip: -150 },
  { id: "f3", baseX: 150, baseY: 170, len: 70, angleOpen: -90, angleGrip: -160 },
  { id: "f4", baseX: 170, baseY: 170, len: 65, angleOpen: -90, angleGrip: -150 },
  { id: "f5", baseX: 190, baseY: 170, len: 55, angleOpen: -90, angleGrip: -135 }
];

let t = 0;
let target = 0;
const speed = 0.04;

function deg2rad(d) {
  return d * Math.PI / 180;
}

function update() {
  t += (target - t) * speed;

  fingers.forEach(f => {
    const angle =
      f.angleOpen + (f.angleGrip - f.angleOpen) * t;

    const rad = deg2rad(angle);
    const x2 = f.baseX + Math.cos(rad) * f.len;
    const y2 = f.baseY + Math.sin(rad) * f.len;

    const el = document.getElementById(f.id);
    el.setAttribute("x1", f.baseX);
    el.setAttribute("y1", f.baseY);
    el.setAttribute("x2", x2);
    el.setAttribute("y2", y2);
  });

  requestAnimationFrame(update);
}

// デモ：3秒ごとに開閉
setInterval(() => {
  target = target === 0 ? 1 : 0;
}, 3000);

update();
</script>

</body>
</html>
