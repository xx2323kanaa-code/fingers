<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Hand – Anatomically Constrained Minimal Model</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  svg {
    width: 360px;
    height: 360px;
  }

  .palm {
    fill: none;
    stroke: yellow;
    stroke-width: 6;
  }

  .wrist {
    stroke: yellow;
    stroke-width: 5;
  }

  .finger {
    stroke: yellow;
    stroke-width: 5;
    stroke-linecap: round;
  }

  .thumb {
    stroke: yellow;
    stroke-width: 5;
    stroke-linecap: round;
  }
</style>
</head>

<body>

<svg viewBox="0 0 360 360">

  <!-- 前腕 → 手首（下方） -->
  <line x1="180" y1="300" x2="180" y2="260" class="wrist"/>

  <!-- 手掌（固定面） -->
  <rect x="120" y="200" width="120" height="60" rx="20" class="palm"/>

  <!-- 4本指（同じ長さ・正面屈曲） -->
  <line id="f1" x1="135" y1="200" x2="135" y2="130" class="finger"/>
  <line id="f2" x1="155" y1="200" x2="155" y2="130" class="finger"/>
  <line id="f3" x1="175" y1="200" x2="175" y2="130" class="finger"/>
  <line id="f4" x1="195" y1="200" x2="195" y2="130" class="finger"/>

  <!-- 親指（別位置・斜め・内転） -->
  <line id="thumb"
        x1="120" y1="230"
        x2="85"  y2="195"
        class="thumb"/>

</svg>

<script>
/*
  屈曲 = 長さが短くなる
  側方には曲がらない
*/

const fingers = [
  { id:"f1", x:135, base:200, open:70, grip:30 },
  { id:"f2", x:155, base:200, open:70, grip:30 },
  { id:"f3", x:175, base:200, open:70, grip:30 },
  { id:"f4", x:195, base:200, open:70, grip:30 }
];

const thumb = {
  x1:120, y1:230,
  x2open:85,  y2open:195,
  x2grip:110, y2grip:215
};

let t = 0;
let target = 0;
const speed = 0.05;

function animate() {
  t += (target - t) * speed;

  // 4指：正面方向に短縮
  fingers.forEach(f => {
    const len = f.open + (f.grip - f.open) * t;
    const el = document.getElementById(f.id);
    el.setAttribute("x1", f.x);
    el.setAttribute("y1", f.base);
    el.setAttribute("x2", f.x);
    el.setAttribute("y2", f.base - len);
  });

  // 親指：内側へ寄る
  const tx = thumb.x2open + (thumb.x2grip - thumb.x2open) * t;
  const ty = thumb.y2open + (thumb.y2grip - thumb.y2open) * t;
  const tel = document.getElementById("thumb");
  tel.setAttribute("x2", tx);
  tel.setAttribute("y2", ty);

  requestAnimationFrame(animate);
}

// デモ
setInterval(() => {
  target = target ? 0 : 1;
}, 3000);

animate();
</script>

</body>
</html>
